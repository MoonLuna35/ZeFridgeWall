
<h1 mat-dialog-title>{{'time_table.New_event' | translate}}</h1>

<form [formGroup]="newEventForm" (ngSubmit)="onSubmit($event)">
    <mat-dialog-content>
    <mat-form-field id="type_field" appearance="fill">
        <mat-label>{{ 'main.Type' | translate }}</mat-label>
        <mat-select formControlName="type">
            <mat-option value="voice_reminder">
                {{ 'time_table.voice_reminder' | translate }}
            </mat-option>
          </mat-select>
    </mat-form-field>
    <div>
        <div class="coll_evt">
            <ul>
                <li (click)="onTabClicked($event, 'infos')" [className]="active_tab==='infos' ? 'active_tab' : 'unactive_tab clickable' ">
                    <h3>{{ 'time_table.Infos' | translate }}</h3>
                    <div>
                        {{ 'time_table.Your vocal assistant will execute itself' | translate }}<br/>
                        {{ 'main.the' | translate }} <b>{{ newEventForm.get('event')?.get('date_begin')?.value }}</b> {{ 'main.at' | translate }} <b>{{ newEventForm.get('event')?.get('time_begin')?.value }}</b>
                    </div>
                </li>
                <li (click)="onTabClicked($event, 'repeater')" [className]="active_tab==='repeater' ? 'active_tab' : 'unactive_tab clickable' ">
                    <h3>{{ 'time_table.Repeater' | translate }}</h3>
                    <div *ngIf="!newEventForm.get('is_usual')?.value">{{ 'time_table.No repeat' | translate }}</div>
                    <div *ngIf="newEventForm.get('is_usual')?.value && newEventForm.get('repeater')?.get('repeat_patern').value === 'daily'">
                        <div>{{ 'main.Each masc' | translate }} <b *ngIf="newEventForm.get('repeater')?.get('repeat_body')?.get('n_day')?.value !== 1">{{ newEventForm.get('repeater')?.get('repeat_body')?.get('n_day')?.value }} </b> {{ 'main.days' | translate }}</div>
                    </div> 
                    <div *ngIf="newEventForm.get('is_usual')?.value && newEventForm.get('repeater')?.get('repeat_patern').value === 'weekly'">
                        <div *ngIf="newEventForm.get('is_usual')?.value">
                            {{ 'main.Each fem' | translate }} <b *ngIf="newEventForm.get('repeater')?.get('repeat_body')?.get('n_week')?.value !== 1">{{ newEventForm.get('repeater')?.get('repeat_body')?.get('n_week')?.value }} </b>{{ 'main.weeks' | translate }}
                        </div>
                        <div>
                            <span>{{ str_week_days }}</span>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="coll_evt">
            <fieldset id="type" [className]="active_tab === 'type' ? '' : 'ghost'">
                <legend>{{ 'time_table.Type' | translate }}</legend>
                
            </fieldset>
            <app-event-message *ngIf="newEventForm.get('type')?.value === 'voice_reminder'" [message_event]="newEventForm.get('event')" [className]="active_tab === 'infos' ? '' : 'ghost'"></app-event-message>
            <fieldset  id="repeater" [className]="active_tab === 'repeater' ? '' : 'ghost'">
                <legend>{{ 'time_table.Repeater' | translate }}</legend>
                <mat-checkbox formControlName="is_usual" (click)="on_is_usual_changed($event)">{{ 'time_table.This event is usual' | translate }}</mat-checkbox>
                <app-repeater *ngIf="is_usual" [repeater]="newEventForm.get('repeater')"></app-repeater>
            </fieldset>
            
        </div>
    </div>
    <pre>{{ newEventForm.value | json }}</pre>
</mat-dialog-content>
<mat-dialog-actions>
    <input type="submit" value="{{ 'time_table.add event' | translate }}"/>
</mat-dialog-actions>
</form>



